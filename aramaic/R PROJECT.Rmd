# Итоговый проект
Автор: Литвинов Ярослав Александрович (МКЛНГ-23)

## Общее описание проекта

Проект представляет собой сопоставительный анализ употребляемых слов в Новом Западноарамейском языке на основании записей и транскрипции устной речи носителей языка. Исследование призвано изучить гипотезу, поставленную явлением языкового сдвига и постепенному переходу от Западноарамейского языка к Арабскому, методами анализа данных

## Сбор данных

В качестве набора данных для исследования был выбран следующий датасет:

[The Maaloula Aramaic Speech Corpus (MASC)](https://zenodo.org/records/6496714)

![Caption for the picture.](D:\Code\da_sgdlceva_mklng\aramaic\images\db_layout.png)
Исходный датасет был преобразован в таблицу, в которой есть следующие столбцы:
1. Индекс токена
2. Внешний вид (форма) токена
3. Индекс леммы
4. Корень слова
5. Форма цитирования для слова
6. Возраст говорящего
7. Пол говорящего

При составлении данных отталкивались от каждого токена в отдельности, сопоставляя им лемму которой они принадлежат, и подставляя возраст и пол говорящих

### Импорты

```{r Import}
library(tidyverse)
library(ggplot2)
```

### Данные

```{r Data}
aramaic_data <- read.csv("project_data.csv")
```

```{r View data}
glimpse(aramaic_data)
```

## Гипотеза
Гипотеза, поставленная в этом исследовании, непосредственно исходит от явления языкового сдвига, который происходит в Западноарамейском языке. Арамейские слова постепенно вытесняются арабскими, так как арабский язык все более становится языков образования и общественной жизни, в общем, делает все, что положено делать государственному языку.

Наша гипотеза заключается в том, чтобы проверить, как меняется словоупотребление в зависимости от возраста говорящих. Мы предполагаем, что старые носители языка консервативны и будут использовать арамейские слова. Более молодые же носители, напротив, могут иметь тенденцию к использованию новых, арабских слов. 

Таким образом, наши гипотезы можно изложить в следующем виде:
H0 - Арабские и Арамейские слова с примерно одинаковой частотой употребляются представителями разных возрастных групп
H1 - 

Чтобы доказать или опровергнуть наше предположение, мы арабские и арамейские слова для сравнения, например:
- ʕarḳūba (arkuba) - гора, утес <арабское>
- šenna (shenna) - гора, зуб <арамейское>

Иногда у слова более одного синонима и мы будем это учитывать при составлении категорий.

## Код

### Выборка

Сделаем выборку из токенов, в которых есть эти слова:

```{r lemma_load}
lemma_data <- read.csv("lemma_etymology.csv")
```

```{r lemma_sort}
aramaic_table <- lemma_data %>%
  filter(etymology == 1)
arabic_table <- lemma_data %>%
  filter(etymology == 2)
```

```{r word_data}
aramaic_words <- aramaic_table$word
arabic_words <- arabic_table$word
```

```{r selection}
aramaic_selected <- aramaic_data %>%
  filter(citation_form %in% aramaic_words | citation_form %in% arabic_words)
```

### Мутация выборки

Немного мутируем наши данные и добавим колонку, означающую категорию слова (word_class). Пусть 1 будет арамейским словом, а 2 - арабским.

```{r mutation}
aramaic_class <- aramaic_selected %>%
  mutate(word_class = ifelse(citation_form %in% aramaic_words, 1, 2))
```

```{r show}
aramaic_class
```
Проверим, каково примерное распределение возрастов среди людей произносящих слова из корпуса
```{r plot}
cbbPalette <- c("#000000", "#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")

aramaic_class %>%
  ggplot(aes(x=speaker_age, group=factor(word_class))) + theme_classic() + geom_histogram(aes(fill=factor(word_class)), alpha=0.8, colour="black") + xlab("Speaker Age") + ylab("Word count") + labs(title="Aramaic / Arabic word usage by speaker age", subtitle=("Aramaic word class 1, Arabic word class 2"), tag="Plot 1") + scale_fill_manual("Word origin", labels=c("Aramaic", "Arabic"), values=cbbPalette)
```

### Проверка гипотезы
В общем и целом осталось только проверить зависимость word_class от speaker_age, для чего воспользуемся T-тестом

```{r test}
wilcox_test <- wilcox.test(speaker_age ~ word_class, data = aramaic_class)
print(wilcox_test)
```
Исходя из результата теста, то есть, p-value < 5%, мы можем сказать, что наша изначальная нулевая гипотеза вероятно не верна, но судя по другому параметру не можем утверждать этого с полной уверенностью: возможно, слова арабского и арамейского происхождения по-разному используются представителями разных возрастных категорий, но эти различия не столь значительны

Кроме того, у нас возникла явная ситуация с неравенством классов. Из стобчатой диаграммы (Plot 1) мы можем наблюдать, что арамейских слов (по крайней мере в числе наших размеченных слов) доминирующее количество

```{r plot 2}
aramaic_class %>%
  ggplot(aes(y=speaker_age, x=X, group=factor(word_class))) + geom_point(aes(colour=factor(word_class)), size=5) + xlab("Number of words") + ylab("Speaker age") + labs(title="Word origin distribution", tag="Plot2") + scale_colour_manual("Word origin", labels=c("Aramaic", "Arabic"), values=cbbPalette)
```


```{r t-test}
spoken_aramaic <- aramaic_class %>%
  filter(word_class == 1)
spoken_aramaic_age <- spoken_aramaic["speaker_age"]
# Получим возрасты всех людей произносящих арамейские слова
spoken_arabic <- aramaic_class %>%
  filter(word_class == 2)
spoken_arabic_age <- spoken_arabic["speaker_age"]
# Сделаем то же самое для арабского

# Проведем t-test
t.test(spoken_aramaic_age, spoken_arabic_age, var.equal = FALSE)
```
